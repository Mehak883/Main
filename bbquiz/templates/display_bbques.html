{%extends "main_que.html"%}
{% block title%}
BB-Display ALL QUESTION
{% endblock%}
{% block display_bbques %}
<style>
    .animate-charcter
{
   
  background-image: linear-gradient(
    -225deg,
    #231557 0%,
    #44107a 29%,
    #ff1361 67%,
    #fff800 100%
  );
  background-size: auto auto;
  background-clip: border-box;
  background-size: 2%00 auto;
  color: #fff;
  background-clip: text;
  text-fill-color: transparent;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: textclip 2s linear infinite;
  display: inline-block;
      font-size: 40px;
      text-shadow: 0 10px 15px rgba(0,0,0,.2) ;
     
}
/* 
@keyframes textclip {
  to {
    background-position: 200% center;
  }
} */


/* .new {
        position: relative;
        background: transparent;
        overflow: hidden;
        border-top: 1px solid rgba(255, 73, 49, 0.5);
        border-right: 1px solid rgba(0, 255, 255, 0.5);
        border-bottom: 1px solid rgba(57, 255, 20, 0.5);
        border-left: 1px solid rgba(255, 255, 113, 0.5);
        font-family: sans-serif;
        display: flex;
        flex-direction: column;
        justify-content: space-around;
        align-items: center;
        padding: 1em;
    } */

    /* p {
        font-size: 0.95rem;
        text-align: center;
    } */

    /* .new1{
        position: absolute;
        border-radius: 100vmax;
    }

    .top {
        top: 0;
        left: 0;
        width: 0;
        height: 5px;
        background: linear-gradient(90deg,
                transparent 50%,
                rgba(255, 90, 49, 0.5),
                rgb(255, 49, 49));
    }

    .bottom {
        right: 0;
        bottom: 0;
        height: 5px;
        background: linear-gradient(90deg,
                rgb(57, 255, 20),
                rgba(57, 255, 20, 0.5),
                transparent 50%);
    }

    .right {
        top: 0;
        right: 0;
        width: 5px;
        height: 0;
        background: linear-gradient(180deg,
                transparent 30%,
                rgba(0, 255, 255, 0.5),
                rgb(0, 255, 255));
    }

    .left {
        left: 0;
        bottom: 0;
        width: 5px;
        height: 0;
        background: linear-gradient(180deg,
                rgb(255, 255, 113),
                rgba(255, 255, 113, 0.5),
                transparent 70%);
    }

    .top {
        animation: animateTop 3s ease-in-out infinite;
    }

    .bottom {
        animation: animateBottom 3s ease-in-out infinite;
    }

    .right {
        animation: animateRight 3s ease-in-out infinite;
    }

    .left {
        animation: animateLeft 3s ease-in-out infinite;
    }

    @keyframes animateTop {
        25% {
            width: 100%;
            opacity: 1;
        }

        30%,
        100% {
            opacity: 0;
        }
    }

    @keyframes animateBottom {

        0%,
        50% {
            opacity: 0;
            width: 0;
        }

        75% {
            opacity: 1;
            width: 100%;
        }

        76%,
        100% {
            opacity: 0;
        }
    }

    @keyframes animateRight {

        0%,
        25% {
            opacity: 0;
            height: 0;
        }

        50% {
            opacity: 1;
            height: 100%;
        }

        55%,
        100% {
            height: 100%;
            opacity: 0;
        }
    }

    @keyframes animateLeft {

        0%,
        75% {
            opacity: 0;
            bottom: 0;
            height: 0;
        }

        100% {
            opacity: 1;
            height: 100%;
        }
    } */
</style>
<div class="container px-5 py-5">
    <div class="row">
        <div class=" text-center  new " style="background-color: transparent;border-radius: 10px;">
            <h3 class="animate-charcter " > Display Questions</h3>
            <span class="top new1"></span>
            <span class="right new1"></span>
            <span class="bottom new1"></span>
            <span class="left new1"></span>
        </div>
    </div>
</div>

<div class="container my-4 ">
    <div class="row">
        <div class=" mb-3">
            <form id="my_form" method="post" class="row g-3  " >
                {% csrf_token %}
                <div class="col-md-3">
                    <div class="input-group ">

                        <label class="input-group-text" class="form-label" for="type">Type</label>
                        <select class="form-select me-2 " name="type" id="type">
                            <option value="">All types</option>
                            <option value="Java">Java</option>
                            <option value="C++">C++</option>
                            <option value="Python">Python</option>
                            <option value="Html">Html</option>
                            <option value="Javascript">Javascript</option>
                            <option value="Aptitude">Aptitude</option>
                        </select>
                    </div>
                    <!-- <div class="invalid-feedback">
                        please enter appropriate type of question! -->
                    <!-- </div> -->
                    <!-- <button type="submit" class="btn btn-outline-success">Submit</button> -->
                    <!-- </div> -->
                    <!-- </form> -->
                </div>
                <div class="col-md-2">
                    <!-- <form class="d-flex " role="search" method="post" >
                {% csrf_token %} -->
                    <input class="form-control me-2" type="search" name="search_que" placeholder="enter question"
                        aria-label="Search" >
                </div>
                <div class="col-md-2">
                    <button class="btn btn-custom" type="submit">Search</button>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="container">
    {% if messages %}
    {% for message in messages %}
    <div class="alert alert-dark alert-dismissible fade show" role="alert">{{message}}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% endfor %}
    {% endif %}
</div>
<div class="container">
    <table class="table  table-borderless" style="border-radius: 10px; background: transparent!important;">
        <thead>
            <tr>
                <th scope="col-md-1">#</th>
                <th scope="col">Que Id</th>
                <th scope="col">Type</th>
                <th scope="col">Question</th>
                <th scope="col-md-1">Edit</th>
                <th scope="col-md-1">Delete</th>
            </tr>
        </thead>
        <tbody id="questionTableBody" class="table-group-divider">
            {% for i in ques %}
            <tr>
                <td scope="col-1">{{forloop.counter}}.</td>
                <td scope="col-1">{{i.question_id}}</td>
                <td scope="col-1">{{i.type}}</td>
                <td scope="col-1">{{i.que}}</td>
                <!-- <td scope="col-1">{{i.a}}</td>
            <td scope="col">{{i.b}}</td>
            <td scope="col">{{i.c}}</td>
            <td scope="col">{{i.d}}</td>
            <td scope="col-1">{{i.ans}}</td> -->
                <td><a href="/edit_bbques/{{i.question_id}}" class="btn btn-custom"
                        onclick="return confirm('Are you sure you want to edit this question')">Edit</a></td>
                <td><a href="/delete_bbques/{{i.question_id}}" class="btn btn-danger"
                        onclick="return confirm('Are you sure you want to delete this book?')">Delete</a></td>
            </tr>
            {%endfor%}
        </tbody>
    </table>
</div>
<script>
    document.getElementById("my_form").addEventListener("submit", function(event) {
      event.preventDefault(); // Prevent the default form submission
  
      // Retrieve the form data
      var formData = new FormData(this);
  
      // Create a new XMLHttpRequest object
      var xhr = new XMLHttpRequest();
  
      // Configure the request
      xhr.open("POST", "{% url 'display_bbques' %}");
      xhr.setRequestHeader("X-CSRFToken", "{{ csrf_token }}");
  
      // Define the callback function for when the request is complete
      xhr.onload = function() {
        if (xhr.status === 200) {
          // Request succeeded
          var response = JSON.parse(xhr.responseText);
  
          // Update the question table on the page
          var tableBody = document.getElementById("questionTableBody");
          tableBody.innerHTML = ""; // Clear existing table rows
  
          // Iterate over the questions in the response and create table rows
          for (var i = 0; i < response.length; i++) {
            var question = response[i];
            var row = document.createElement("tr");
  
            var counterCell = document.createElement("td");
            counterCell.textContent = (i + 1) + ".";
            row.appendChild(counterCell);
  
            var questionIdCell = document.createElement("td");
            questionIdCell.textContent = question.question_id;
            row.appendChild(questionIdCell);
  
            var typeCell = document.createElement("td");
            typeCell.textContent = question.type;
            row.appendChild(typeCell);
  
            var queCell = document.createElement("td");
            queCell.textContent = question.que;
            row.appendChild(queCell);
  
            var editCell = document.createElement("td");
            var editLink = document.createElement("a");
            editLink.href = "/edit_bbques/" + question.question_id;
            editLink.className = "btn btn-custom";
            editLink.textContent = "Edit";
            editLink.setAttribute("onclick", "return confirm('Are you sure you want to edit this question')");
            editCell.appendChild(editLink);
            row.appendChild(editCell);
  
            var deleteCell = document.createElement("td");
            var deleteLink = document.createElement("a");
            deleteLink.href = "/delete_bbques/" + question.question_id;
            deleteLink.className = "btn btn-custom";
            deleteLink.textContent = "Delete";
            deleteLink.setAttribute("onclick", "return confirm('Are you sure you want to delete this question')");
            deleteCell.appendChild(deleteLink);
            row.appendChild(deleteCell);
            tableBody.appendChild(row);
          }
  
          // Close the modal or perform any other necessary actions
          // ...
        } else {
          // Request failed, handle the error
          // ...
        }
      };
  
      // Send the request
      xhr.send(formData);
    });
  </script>
  
{%endblock%}